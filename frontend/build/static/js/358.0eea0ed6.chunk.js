/*! For license information please see 358.0eea0ed6.chunk.js.LICENSE.txt */
(self.webpackChunkabsensi_frontend=self.webpackChunkabsensi_frontend||[]).push([[358],{1542:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var n=a(454),t=(a(9950),a(4414));const i=e=>{let s=Object.assign({},((0,n.A)(e),e));return(0,t.jsx)("div",{className:"nk-content",children:(0,t.jsx)("div",{className:"container-fluid",children:(0,t.jsx)("div",{className:"nk-content-inner",children:(0,t.jsxs)("div",{className:"nk-content-body",children:[s.page?null:s.children,"component"===s.page?(0,t.jsx)("div",{className:"components-preview wide-md mx-auto",children:s.children}):null]})})})})}},7358:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var n=a(9950),t=a(3429),i=a(5988),r=a(7806),l=a(1542),o=a(9343),d=a(4209),c=a(9051),m=a.n(c),u=(a(6101),a(9379)),h=a(454),p=a(3120),x=a(1340),j=a(877),g=a(1646),f=a(3452),k=a(9449),_=a(2348),b=a.n(_),M=a(5208),Y=a(4414);const y=e=>{let s=Object.assign({},((0,h.A)(e),e));const{register:a,handleSubmit:t,setValue:r,formState:{errors:l},getValues:o,reset:c,control:_}=(0,k.mN)(),[y,N]=(0,n.useState)(!1),D=(0,n.forwardRef)(((e,s)=>{let{value:a,onClick:n,onChange:t}=e;return(0,Y.jsxs)("div",{onClick:n,ref:s,children:[(0,Y.jsx)("div",{className:"form-icon form-icon-left",children:(0,Y.jsx)(i.In,{name:"calendar"})}),(0,Y.jsx)("input",{className:"form-control date-picker",type:"text",value:a,onChange:t})]})})),v=async()=>{const e={semester_id:s.semester.id,name:o("name"),date:m()(o("date")).format("YYYY-MM-DD"),description:o("description")};await(0,M.M_)(e).then((e=>{(0,i.eI)(e.data.message,"success"),s.setLoadData(!0),A()})).catch((e=>(0,i.eI)(e,"error")))},L=async()=>{N(!0);const e={id:o("id"),semester_id:o("semester_id"),name:o("name"),date:m()(o("date")).format("YYYY-MM-DD"),description:o("description")};await(0,M.yo)(e).then((e=>{(0,i.eI)(e.data.message,"success"),s.setLoadData(!0),A()})).catch((e=>(0,i.eI)(e,"error")))},A=()=>{c(),r("date",new Date),s.setHoliday(null),s.setModal(!1)};return(0,n.useEffect)((()=>{if(null!==s.holiday){const e=s.holiday;r("id",e.id),r("semester_id",e.semester.id),r("name",e.name),r("date",e.date),r("description",e.description)}}),[s.holiday]),(0,Y.jsx)(n.Fragment,{children:(0,Y.jsxs)(p.A,{isOpen:s.modal,toggle:A,children:[(0,Y.jsx)(x.A,{children:void 0!==s.holiday?"UBAH":"TAMBAH"}),(0,Y.jsx)(j.A,{children:(0,Y.jsx)("form",{className:"form-validate is-alter",onSubmit:t((()=>{N(!0),null===s.holiday?v().then((()=>N(!1))):L().then((()=>N(!1)))})),children:(0,Y.jsxs)(i.fI,{className:"gy-2",children:[(0,Y.jsx)(i.fv,{className:"col-md-12",children:(0,Y.jsxs)("div",{className:"form-group",children:[(0,Y.jsx)(g.A,{htmlFor:"name",className:"form-label",children:"Nama"}),(0,Y.jsxs)("div",{className:"form-control-wrap",children:[(0,Y.jsx)("input",(0,u.A)({className:"form-control",type:"text",id:"name",placeholder:"Ex. Libur Tahun Baru"},a("name",{required:!0}))),l.name&&(0,Y.jsx)("span",{className:"invalid",children:"Kolom tidak boleh kosong."})]})]})}),(0,Y.jsx)(i.fv,{className:"col-md-12",children:(0,Y.jsxs)("div",{className:"form-group",children:[(0,Y.jsx)(g.A,{children:"Tanggal"}),(0,Y.jsxs)("div",{className:"form-control-wrap",children:[(0,Y.jsx)("div",{className:"form-icon form-icon-left",children:(0,Y.jsx)(i.In,{name:"calendar"})}),(0,Y.jsx)(k.xI,{control:_,name:"date",className:"form-control",rules:{required:!0},render:e=>{let{field:{onChange:s,value:a,ref:n}}=e;return(0,Y.jsx)(b(),{inputRef:n,selected:a||new Date,className:"form-control date-picker",onChange:e=>s(e),dateFormat:"dd/MM/yyyy",customInput:(0,Y.jsx)(D,{})})}})]})]})}),(0,Y.jsx)(i.fv,{className:"col-md-12",children:(0,Y.jsxs)("div",{className:"form-group",children:[(0,Y.jsx)(g.A,{htmlFor:"description",className:"form-label",children:"Diskripsi"}),(0,Y.jsxs)("div",{className:"form-control-wrap",children:[(0,Y.jsx)("input",(0,u.A)({className:"form-control",type:"text",id:"description",placeholder:"Ex. Libur Tahun Baru"},a("description",{required:!0}))),l.description&&(0,Y.jsx)("span",{className:"invalid",children:"Kolom tidak boleh kosong."})]})]})}),(0,Y.jsx)("div",{className:"form-group",children:(0,Y.jsx)(f.A,{size:"md",className:"btn-block",color:"primary",type:"submit",children:y?(0,Y.jsx)(d.A,{size:"sm",color:"light"}):"SIMPAN"})})]})})})]})})};var N=a(8460),D=a(1714);const v=()=>{const[e]=(0,N.M)(),[s,a]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!0),[h,p]=(0,n.useState)(!1),[x,j]=(0,n.useState)(!1),[g,f]=(0,n.useState)([]),[k,_]=(0,n.useState)(null),b=[{name:"Libur",selector:e=>e.name,sortable:!1},{name:"Tanggal",selector:e=>m()(e.date).locale("id").format(" DD MMMM YYYY"),sortable:!1},{name:"Diskripsi",selector:e=>e.description,sortable:!1,hide:370},{name:"Aksi",selector:e=>e.id,sortable:!1,hide:"sm",cell:e=>(0,Y.jsxs)(o.A,{size:"sm",children:[(0,Y.jsx)(i.$n,{outline:!0,color:"warning",onClick:()=>{_(e),j(!0)},children:(0,Y.jsx)(i.In,{name:"edit-alt"})}),(0,Y.jsx)(i.$n,{outline:!0,color:"danger",onClick:()=>{p(e.id),(0,M.zr)(e.id).then((e=>{(0,i.eI)(e.data.message,"success"),u(!0)})).catch((e=>(0,i.eI)(e,"error")))},children:h===e.id?(0,Y.jsx)(d.A,{size:"sm"}):(0,Y.jsx)(i.In,{name:"trash"})})]})}],v=()=>{const s=D.oR.loading("Mengambil Data",{type:"info",position:"top-right",hideProgressBar:!0,progress:!1,closeButton:!1});let a=m()(e.start,"YYYY-MM-DD"),n=m()(e.end,"YYYY-MM-DD"),t=m()(e.end,"YYYY-MM-DD").format("YYYY").toString(),r=[];for(;a<=n;)r.push(a.format("M")),a.add(1,"M");r.map((a=>{fetch("https://api-harilibur.vercel.app/api?month=".concat(a,"&year=").concat(t)).then((e=>e.json())).then((a=>{a.filter((e=>!0===e.is_national_holiday)).map((a=>{const n={semester_id:e.id,name:a.holiday_name,date:m()(a.holiday_date,"YYYY-M-D").format("YYYY-MM-DD HH:mm:ss"),description:""};a++,(0,M.M_)(n).then((()=>D.oR.update(s,{render:"Menyimpan data hari libur ".concat(a),type:"info",isLoading:!0}))).then((()=>{D.oR.update(s,{render:"Sinkronasi berhasil",type:"success",isLoading:!1,autoClose:!0}),u(!0)})).catch((e=>{(0,i.eI)(e,"error"),D.oR.update(s,{render:"Gagal melakukan sinkronasi",type:"error",isLoading:!1,autoClose:!0})}))}))}))}))};return(0,n.useEffect)((()=>{c&&(0,M.Jt)({semester_id:e.id}).then((e=>{f(e.data.result),u(!1)})).catch((e=>(0,i.eI)(e,"error")))}),[c]),(0,Y.jsxs)(n.Fragment,{children:[(0,Y.jsx)(t.A,{title:"Data Hari Libur"}),(0,Y.jsxs)(l.A,{page:"component",children:[(0,Y.jsx)(i.GE,{size:"lg",wide:"sm",children:(0,Y.jsx)(i.X3,{children:(0,Y.jsx)(i.n0,{link:"/",icon:"arrow-left",children:"Dashboard"})})}),(0,Y.jsxs)(i.eB,{size:"sm",children:[(0,Y.jsx)(i.GE,{size:"sm",children:(0,Y.jsxs)(i.CZ,{children:[(0,Y.jsxs)(i.X3,{children:[(0,Y.jsx)(i.E9,{tag:"h4",children:"Data Hari Libur"}),(0,Y.jsxs)("p",{children:["Just import ",(0,Y.jsx)("code",{children:"ReactDataTable"})," from ",(0,Y.jsx)("code",{children:"components"}),", it is built in for react dashlite."]})]}),(0,Y.jsx)(i.X3,{children:(0,Y.jsxs)("div",{className:"toggle-wrap nk-block-tools-toggle",children:[(0,Y.jsx)("a",{href:"#more",className:"btn btn-icon btn-trigger toggle-expand me-n1",onClick:e=>{e.preventDefault(),a(!s)},children:(0,Y.jsx)(i.In,{name:"more-v"})}),(0,Y.jsx)("div",{className:"toggle-expand-content",style:{display:s?"block":"none"},children:(0,Y.jsxs)("ul",{className:"nk-block-tools g-3",children:[(0,Y.jsxs)("li",{className:"nk-block-tools-opt",children:[(0,Y.jsx)(i.$n,{className:"toggle btn-icon d-md-none",color:"danger",onClick:()=>{v()},children:(0,Y.jsx)(i.In,{name:"reload"})}),(0,Y.jsxs)(i.$n,{className:"toggle d-none d-md-inline-flex",color:"danger",onClick:()=>{v()},children:[(0,Y.jsx)(i.In,{name:"reload"}),(0,Y.jsx)("span",{children:"SYNC"})]})]}),(0,Y.jsxs)("li",{className:"nk-block-tools-opt",children:[(0,Y.jsx)(i.$n,{className:"toggle btn-icon d-md-none",color:"dark",onClick:()=>{j(!0)},children:(0,Y.jsx)(i.In,{name:"plus"})}),(0,Y.jsxs)(i.$n,{className:"toggle d-none d-md-inline-flex",color:"dark",onClick:()=>{j(!0)},children:[(0,Y.jsx)(i.In,{name:"plus"}),(0,Y.jsx)("span",{children:"TAMBAH"})]})]})]})})]})})]})}),(0,Y.jsx)(i.Ns,{children:(0,Y.jsx)(r.A,{data:g,columns:b,expandableRows:!0,pagination:!0})})]}),(0,Y.jsx)(y,{modal:x,setModal:j,holiday:k,setHoliday:_,semester:e,setLoadData:u})]})]})}},5208:(e,s,a)=>{"use strict";a.d(s,{Jt:()=>t,M_:()=>i,yo:()=>r,zr:()=>l});const n=new(a(183).g);function t(e){return n.get("".concat("/master/holiday"),e)}function i(e){return n.create("/master/holiday",e)}function r(e){const s="/master/holiday/".concat(e.id);return n.update("".concat(s),e)}function l(e){const s="/master/holiday/".concat(e);return n.delete("".concat(s))}},6101:function(e,s,a){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,s){return 12===e&&(e=0),"pagi"===s?e:"siang"===s?e>=11?e:e+12:"sore"===s||"malam"===s?e+12:void 0},meridiem:function(e,s,a){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(a(9051))}}]);