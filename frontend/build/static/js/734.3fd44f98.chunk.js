"use strict";(self.webpackChunkabsensi_frontend=self.webpackChunkabsensi_frontend||[]).push([[734],{7276:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(9950),r=a(3120),n=a(4414);const l=e=>{let{img:t}=e;const[a,l]=(0,s.useState)(!1),o=()=>{l(!a)};return(0,n.jsxs)("a",{className:"gallery-image popup-image",onClick:e=>{e.preventDefault(),o()},href:"#gallery",children:[(0,n.jsx)("img",{className:"w-100 rounded-top",src:t,alt:""}),(0,n.jsxs)(r.A,{isOpen:a,toggle:o,size:"large",contentClassName:"rounded-5",children:[(0,n.jsx)("button",{type:"button",className:"mfp-close",onClick:o,children:"\xd7"}),(0,n.jsx)("img",{className:"w-100 rounded-5",style:{height:"100%"},src:t,alt:""})]})]})}},5526:(e,t,a)=>{a.d(t,{A:()=>l});a(9950);var s=a(5988),r=a(2074),n=a(4414);const l=()=>(0,n.jsx)("div",{className:"nk-footer nk-auth-footer-full",children:(0,n.jsx)("div",{className:"container wide-lg",children:(0,n.jsxs)(s.fI,{className:"g-3",children:[(0,n.jsx)(s.fv,{lg:6,className:"order-lg-last",children:(0,n.jsxs)("ul",{className:"nav nav-sm justify-content-center justify-content-lg-end",children:[(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsx)(r.N_,{className:"nav-link",target:"_blank",to:"".concat("","/auths/terms"),children:"Terms & Condition"})}),(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsx)(r.N_,{className:"nav-link",target:"_blank",to:"".concat("","/auths/terms"),children:"Privacy Policy"})}),(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsx)(r.N_,{className:"nav-link",target:"_blank",to:"".concat("","/auths/faq"),children:"Help"})})]})}),(0,n.jsx)(s.fv,{lg:"6",children:(0,n.jsx)("div",{className:"nk-block-content text-center text-lg-start",children:(0,n.jsx)("p",{className:"text-soft",children:"\xa9 2025 Dashlite. All Rights Reserved."})})})]})})})},6734:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(9950),r=a(3429),n=a(2074),l=a(678),o=a(6317),c=a(5988),i=(a(6101),a(5526)),d=a(7590),u=a(8825),m=a(9051),h=a.n(m),f=a(1925),x=a(9161),v=a(6882),D=a(4414);const g=()=>{const e=(0,s.useRef)(),t=(0,s.useRef)(),a=(0,s.useRef)(),[r,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(""),i=t=>{var a;null===e||void 0===e||null===(a=e.current)||void 0===a||a.stop();const s=JSON.parse(t.data);(0,f.Jt)().then((e=>{const t=e.data.result.filter((e=>e.day===h()().day().toString())).pop(),a=m(t.in,-1),r=m(t.in,2),n=m(t.out,-1),l=m(t.out,3);h()().toDate()<a.toDate()?(0,c.eI)("Absensi masuk belum dimulai.","error"):a.toDate()>h()().toDate()&&h()().toDate()<r.toDate()?(0,x.Jt)({date:h()().format("YYYY-MM-DD"),teacher_id:s.id}).then((e=>{var t,a;const s=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.result)||void 0===a?void 0:a.pop();s.date=h()(s.date,"YYYY-MM-DD").format("YYYY-MM-DD"),s.statusIn="H",s.in=h()().format("HH:mm:ss"),(0,x.yo)(s).then((()=>{(0,c.eI)("Presensi Masuk berhasil disimpan.","success")})).catch((e=>{(0,c.eI)(e,"error")}))})).catch((e=>{(0,c.eI)(e,"error")})):r.toDate()<h()().toDate()&&h()().toDate()<n.toDate()?(0,c.eI)("Absensi pulang belum dimulai.","error"):n.toDate()<h()().toDate()&&h()().toDate()<l.toDate()?(0,x.Jt)({date:h()().format("YYYY-MM-DD"),teacher_id:s.id}).then((e=>{var t,a;const s=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.result)||void 0===a?void 0:a.pop();s.date=h()(s.date,"YYYY-MM-DD").format("YYYY-MM-DD"),s.statusOut="H",s.Out=h()().format("HH:mm:ss"),(0,x.yo)(s).then((()=>{(0,c.eI)("Presensi Pulang berhasil disimpan.","success")})).catch((e=>{(0,c.eI)(e,"error")}))})).catch((e=>{(0,c.eI)(e,"error")})):(0,c.eI)("Absensi telah selesai hari ini.","error")})),setTimeout((()=>{var t;null===e||void 0===e||null===(t=e.current)||void 0===t||t.start()}),5e3)},d=e=>{console.log(e)},m=(e,t)=>h()(e,"HH : mm : ss").add(t,"hours");return(0,s.useEffect)((()=>{var s;null!==t&&void 0!==t&&t.current&&!e.current&&(e.current=new u.A(null===t||void 0===t?void 0:t.current,i,{onDecodeError:d,preferredCamera:"environment",highlightScanRegion:!0,highlightCodeOutline:!0,overlay:(null===a||void 0===a?void 0:a.current)||void 0}),null===e||void 0===e||null===(s=e.current)||void 0===s||s.start().then((e=>{console.log(e),n(!0)})).catch((e=>{e&&n(!1)})));return()=>{var a;null!==t&&void 0!==t&&t.current||(null===e||void 0===e||null===(a=e.current)||void 0===a||a.stop())}}),[]),(0,s.useEffect)((()=>{r||alert("Camera is blocked or not accessible. Please allow camera in your browser permissions and Reload.")}),[r]),(0,s.useEffect)((()=>{setInterval((()=>{o(h()().format("HH:mm:ss"))}),1e3)}),[l]),(0,D.jsxs)(c.Ns,{className:"card-bordered",bodyClass:"card-inner-lg",children:[(0,D.jsx)(c.GE,{children:(0,D.jsxs)(c.tD,{className:"text-center",children:[(0,D.jsx)(c.E9,{children:"SISTEM ABSENSI ONLINE"}),(0,D.jsx)(c.E9,{className:"text-primary",children:h()(new Date).locale("id").format("dddd, DD MMMM YYYY")}),(0,D.jsx)(c.E9,{className:"text-primary",children:l}),(0,D.jsx)(c.w4,{children:(0,D.jsx)(v.A,{className:"alert-icon",color:"danger",children:(0,D.jsx)("p",{className:"fw-bold fs-6",children:"Arahkan QR Code anda ke Kamera"})})})]})}),(0,D.jsx)("div",{className:"ratio ratio-16x9",children:(0,D.jsx)("video",{ref:t})})]})};var j=a(4084),Y=a(9163),p=a(183);const N=new p.g;const b=()=>{const[e,t]=(0,s.useState)(""),[a,r]=(0,s.useState)({});return(0,s.useEffect)((()=>{var e;(e={date:h()().format("YYYY-MM-DD")},N.get("".concat("/token"),e)).then((e=>{var t,a;r(JSON.stringify(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.result)||void 0===a?void 0:a.pop()))})).catch((e=>(0,c.eI)(e,"error")))}),[]),(0,s.useEffect)((()=>{setInterval((()=>{t(h()().format("HH:mm:ss"))}),1e3)}),[e]),(0,D.jsxs)(c.Ns,{className:"card-bordered",bodyClass:"card-inner-lg",children:[(0,D.jsx)(c.GE,{children:(0,D.jsxs)(c.tD,{className:"text-center",children:[(0,D.jsx)(c.E9,{children:"SISTEM ABSENSI ONLINE"}),(0,D.jsx)(c.E9,{className:"text-info",children:h()(new Date).locale("id").format("dddd, DD MMMM YYYY")}),(0,D.jsx)(c.E9,{className:"text-danger",children:e}),(0,D.jsx)(c.w4,{children:(0,D.jsx)(v.A,{className:"alert-icon",color:"info",children:(0,D.jsx)("p",{className:"fw-bold fs-6",children:"Silahkan scan QRCode Dibawah ini"})})})]})}),(0,D.jsx)(j.A,{className:"border border-3 border-info p-2 col-md-6 offset-3",children:(0,D.jsx)(Y.h,{value:a,size:500})})]})};var M=a(7276);const I=()=>{const e=JSON.parse(localStorage.getItem("teacher")),[t,a]=(0,s.useState)();return(0,s.useEffect)((()=>{setInterval((()=>{a(h()().format("HH:mm:ss"))}),1e3)}),[t]),(0,D.jsx)(s.Suspense,{fallback:(0,D.jsx)("div",{children:"Loading..."}),children:(0,D.jsxs)(c.Ns,{className:"card-bordered",bodyClass:"card-inner-lg",children:[(0,D.jsx)(c.GE,{children:(0,D.jsxs)(c.tD,{className:"text-center",children:[(0,D.jsx)(c.E9,{children:"SISTEM ABSENSI ONLINE"}),(0,D.jsx)(c.E9,{className:"text-info",children:h()(new Date).locale("id").format("dddd, DD MMMM YYYY")}),(0,D.jsx)(c.E9,{className:"text-danger",children:t}),(0,D.jsx)(c.w4,{children:(0,D.jsx)(v.A,{color:"info",children:(0,D.jsx)("p",{className:"fw-bold fs-6",children:"Silahkan arahkan QRCode Dibawah ini ke scanner"})})})]})}),(0,D.jsx)(c.fv,{className:"border border-3 border-info align-self-center",children:(0,D.jsx)(M.A,{img:e.qrcode})})]})})},k=()=>{const e=(0,s.useRef)(),t=(0,s.useRef)(),a=(0,s.useRef)(),[r,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(""),i=t=>{var a;null===e||void 0===e||null===(a=e.current)||void 0===a||a.stop();const s=JSON.parse(t.data);(0,f.Jt)().then((e=>{const t=e.data.result.filter((e=>e.day===h()().day().toString())).pop(),a=m(t.in,-1),r=m(t.in,2),n=m(t.out,-1),l=m(t.out,3);h()().toDate()<a.toDate()?(0,c.eI)("Absensi masuk belum dimulai.","error"):a.toDate()>h()().toDate()&&h()().toDate()<r.toDate()?(0,x.Jt)({date:h()().format("YYYY-MM-DD"),teacher_id:s.id}).then((e=>{var t,a;const s=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.result)||void 0===a?void 0:a.pop();s.date=h()(s.date,"YYYY-MM-DD").format("YYYY-MM-DD"),s.statusIn="H",s.in=h()().format("HH:mm:ss"),(0,x.yo)(s).then((()=>{(0,c.eI)("Presensi Masuk berhasil disimpan.","success")})).catch((e=>{(0,c.eI)(e,"error")}))})).catch((e=>{(0,c.eI)(e,"error")})):r.toDate()<h()().toDate()&&h()().toDate()<n.toDate()?(0,c.eI)("Absensi pulang belum dimulai.","error"):n.toDate()<h()().toDate()&&h()().toDate()<l.toDate()?(0,x.Jt)({date:h()().format("YYYY-MM-DD"),teacher_id:s.id}).then((e=>{var t,a;const s=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.result)||void 0===a?void 0:a.pop();s.date=h()(s.date,"YYYY-MM-DD").format("YYYY-MM-DD"),s.statusOut="H",s.Out=h()().format("HH:mm:ss"),(0,x.yo)(s).then((()=>{(0,c.eI)("Presensi Pulang berhasil disimpan.","success")})).catch((e=>{(0,c.eI)(e,"error")}))})).catch((e=>{(0,c.eI)(e,"error")})):(0,c.eI)("Absensi telah selesai hari ini.","error")})),setTimeout((()=>{var t;null===e||void 0===e||null===(t=e.current)||void 0===t||t.start()}),5e3)},d=e=>{console.log(e)},m=(e,t)=>h()(e,"HH : mm : ss").add(t,"hours");return(0,s.useEffect)((()=>{var s;null!==t&&void 0!==t&&t.current&&!e.current&&(e.current=new u.A(null===t||void 0===t?void 0:t.current,i,{onDecodeError:d,preferredCamera:"environment",highlightScanRegion:!0,highlightCodeOutline:!0,overlay:(null===a||void 0===a?void 0:a.current)||void 0}),null===e||void 0===e||null===(s=e.current)||void 0===s||s.start().then((e=>{console.log(e),n(!0)})).catch((e=>{e&&n(!1)})));return()=>{var a;null!==t&&void 0!==t&&t.current||(null===e||void 0===e||null===(a=e.current)||void 0===a||a.stop())}}),[]),(0,s.useEffect)((()=>{r||alert("Camera is blocked or not accessible. Please allow camera in your browser permissions and Reload.")}),[r]),(0,s.useEffect)((()=>{setInterval((()=>{o(h()().format("HH:mm:ss"))}),1e3)}),[l]),(0,D.jsx)(s.Suspense,{fallback:(0,D.jsx)("div",{children:"Loading..."}),children:(0,D.jsxs)(c.Ns,{className:"card-bordered",bodyClass:"card-inner-lg",children:[(0,D.jsx)(c.GE,{children:(0,D.jsxs)(c.tD,{className:"text-center",children:[(0,D.jsx)(c.E9,{children:"SISTEM ABSENSI ONLINE"}),(0,D.jsx)(c.E9,{className:"text-primary",children:h()(new Date).locale("id").format("dddd, DD MMMM YYYY")}),(0,D.jsx)(c.E9,{className:"text-primary",children:l}),(0,D.jsx)(c.w4,{children:(0,D.jsx)(v.A,{color:"danger",children:(0,D.jsx)("p",{className:"fw-bold fs-6",children:"Arahkan Kamera ke QRCode Absensi"})})})]})}),(0,D.jsx)("div",{className:"ratio ratio-16x9",children:(0,D.jsx)("video",{ref:t})})]})})};var S=a(4209);const E=()=>{const e=JSON.parse(localStorage.getItem("teacher")),[t,a]=(0,s.useState)(!1),[r,n]=(0,s.useState)(),l=(e,t)=>h()(e,"HH : mm : ss").add(t,"hours");return(0,s.useEffect)((()=>{setInterval((()=>{n(h()().format("HH:mm:ss"))}),1e3)}),[r]),(0,D.jsx)(s.Suspense,{fallback:null,children:(0,D.jsxs)(c.Ns,{className:"card-bordered",bodyClass:"card-inner-lg",children:[(0,D.jsx)(c.GE,{children:(0,D.jsxs)(c.tD,{className:"text-center",children:[(0,D.jsx)(c.E9,{children:"SISTEM ABSENSI ONLINE"}),(0,D.jsx)(c.E9,{className:"text-primary",children:h()(new Date).locale("id").format("dddd, DD MMMM YYYY")}),(0,D.jsx)(c.E9,{className:"text-primary",children:r}),(0,D.jsx)(c.w4,{children:(0,D.jsx)(v.A,{fade:!1,color:"danger",children:(0,D.jsx)("p",{className:"fw-bold fs-6",children:"Tekan Tombol dibawah ini untuk melakukan Presensi"})})})]})}),(0,D.jsx)(c.eB,{className:"mt-3",children:(0,D.jsx)("div",{className:"form-group",children:(0,D.jsx)(c.$n,{size:"xl",className:"btn-block",color:"success",onClick:t=>(t=>{t.preventDefault(),a(!0),(0,f.Jt)().then((t=>{const s=t.data.result.filter((e=>e.day===h()().day().toString())).pop(),r=l(s.in,-1),n=l(s.in,2),o=l(s.out,-1),i=l(s.out,3);h()().toDate()<r.toDate()?((0,c.eI)("Absensi masuk belum dimulai.","error"),a(!1)):r.toDate()<h()().toDate()&&h()().toDate()<n.toDate()?(0,x.Jt)({date:h()().format("YYYY-MM-DD"),teacher_id:e.id}).then((e=>{var t,s;const r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(s=t.result)||void 0===s?void 0:s.pop();r.date=h()(r.date,"YYYY-MM-DD").format("YYYY-MM-DD"),r.statusIn="H",r.in=h()().format("HH:mm:ss"),(0,x.yo)(r).then((()=>{(0,c.eI)("Presensi Masuk berhasil disimpan.","success"),a(!1)})).catch((e=>{(0,c.eI)(e,"error"),a(!1)}))})).catch((e=>{(0,c.eI)(e,"error"),a(!1)})):n.toDate()<h()().toDate()&&h()().toDate()<o.toDate()?((0,c.eI)("Absensi pulang belum dimulai.","error"),a(!1)):o.toDate()<h()().toDate()&&h()().toDate()<i.toDate()?(0,x.Jt)({date:h()().format("YYYY-MM-DD"),teacher_id:e.id}).then((e=>{var t,s;const r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(s=t.result)||void 0===s?void 0:s.pop();r.date=h()(r.date,"YYYY-MM-DD").format("YYYY-MM-DD"),r.statusOut="H",r.Out=h()().format("HH:mm:ss"),(0,x.yo)(r).then((()=>{(0,c.eI)("Presensi Pulang berhasil disimpan.","success"),a(!1)})).catch((e=>{(0,c.eI)(e,"error"),a(!1)}))})).catch((e=>{(0,c.eI)(e,"error"),a(!1)})):((0,c.eI)("Absensi telah selesai hari ini.","error"),a(!1))}))})(t),children:t?(0,D.jsx)(S.A,{size:"sm",color:"light"}):"HADIR"})})})]})})},y=()=>{const e=(new p.g).getLoggedInUser(),[t,a]=(0,s.useState)({});return(0,s.useEffect)((()=>{(0,d.W)({id:1}).then((e=>{a(e.data.result)})).catch((e=>(0,c.eI)(e,"error")))}),[]),(0,D.jsxs)(s.Suspense,{fallback:(0,D.jsx)("div",{children:"Loading..."}),children:[(0,D.jsx)(r.A,{title:"Scan Kehadiran Guru"}),(0,D.jsxs)(c.eB,{className:"nk-block-middle nk-auth-body  wide-md",children:[(0,D.jsx)("div",{className:"brand-logo pb-4 text-center",children:(0,D.jsxs)(n.N_,{to:"/",className:"logo-link",children:[(0,D.jsx)("img",{className:"logo-light logo-img logo-img-lg",src:l,alt:"logo"}),(0,D.jsx)("img",{className:"logo-dark logo-img logo-img-lg",src:o,alt:"logo-dark"})]})}),"1"===e.role&&"1"===t.type&&(0,D.jsx)(g,{}),"1"===e.role&&"2"===t.type&&(0,D.jsx)(b,{}),"3"===e.role&&"1"===t.type&&(0,D.jsx)(I,{}),"3"===e.role&&"2"===t.type&&(0,D.jsx)(k,{}),"3"===e.role&&"3"===t.type&&(0,D.jsx)(E,{})]}),(0,D.jsx)(i.A,{})]})}},9161:(e,t,a)=>{a.d(t,{Jt:()=>r,yo:()=>n});const s=new(a(183).g);function r(e){return s.get("".concat("/presence"),e)}function n(e){const t="/presence/".concat(e.id);return s.update("".concat(t),e)}},7590:(e,t,a)=>{a.d(t,{W:()=>r,y:()=>n});const s=new(a(183).g);function r(e){const t="/master/school/".concat(e.id);return s.get("".concat(t))}function n(e){const t="/master/school/".concat(e.id);return s.updateWithFile("".concat(t),e)}},1925:(e,t,a)=>{a.d(t,{Jt:()=>r,M_:()=>n,yo:()=>l,zr:()=>o});const s=new(a(183).g);function r(e){return s.get("".concat("/master/work"),e)}function n(e){return s.create("/master/work",e)}function l(e){const t="/master/work/".concat(e.id);return s.update("".concat(t),e)}function o(e){const t="/master/work/".concat(e);return s.delete("".concat(t))}},6317:(e,t,a)=>{e.exports=a.p+"static/media/logo-dark.4efff1a5ed90169795e2.png"},678:(e,t,a)=>{e.exports=a.p+"static/media/logo.4b9628cf07f2cf94ec1f.png"}}]);